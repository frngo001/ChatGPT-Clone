import{J as Be,K as se,M as N,P as z,Q as L,T as V,U as q,V as ae,W as ze,X as F,Y as Ve,Z as qe,$ as re,a0 as je,r as h,a1 as Ge,a2 as Ke,u as be,E as We,m as W,j as t,f as Ze,L as I,c as G,B as S,a3 as Xe,O as Je}from"./index-Dh7oQLGv.js";import{u as ve}from"./useLocation-BmjE5kjF.js";import{a as Ye,M as et,u as T,b as ye,c as Ce,d as H,e as Z,f as tt,g as ne,h as ie,A as st,i as at,j as rt,k as nt,l as it,m as ot,n as lt,o as ct,p as dt,q as ht,r as ut,s as pt,t as ft,L as xt,v as mt,w as gt,H as jt,T as bt,C as vt,P as yt}from"./profile-dropdown-DUphDnv7.js";import{C as Ct,a as St,b as Nt,c as wt,d as oe,e as _,f as U,g as kt}from"./command-BQHzBPIR.js";import{S as Se,T as le}from"./trash-2-640Y3Qv4.js";import{c as D}from"./createLucideIcon-lxK-mJ-t.js";import{F as Mt}from"./file-text-rhwPEDzF.js";import{S as Rt}from"./scroll-area-DGxKhY8E.js";import{A as ce}from"./arrow-right-9SwAD1-a.js";import{u as Ne}from"./dataset-store-CsnM_bGD.js";import{u as Dt,c as Ot,e as Et,a as Tt,f as Pt}from"./index-saGGflCH.js";import{P as X}from"./index-CJ6jLVRY.js";import{P as _t}from"./index-D872S1Wg.js";import{B as Lt}from"./badge-Dc2FE8J8.js";import{D as we,a as ke,b as Me,d as At,e as $t,c as Re}from"./dropdown-menu-Ung7NCvq.js";import{I as Qt}from"./input-CQ2elyY-.js";import{u as w}from"./ollama-chat-store-uT0Z94QS.js";import{S as Ft}from"./search-DRfiHEtc.js";import{P as De,a as Oe,b as Ee}from"./popover-CpUO_7VS.js";import{a as Te}from"./react-icons.esm-CljQgaNf.js";import{S as It,a as Ut,b as Ht,d as Bt,e as de}from"./select-BvnNWTdX.js";import{L as Pe}from"./loader-circle-DXrAGjc0.js";var zt=class extends Be{constructor(e,s){super(),this.options=s,this.#s=e,this.#r=null,this.#a=se(),this.bindMethods(),this.setOptions(s)}#s;#e=void 0;#f=void 0;#t=void 0;#i;#d;#a;#r;#x;#h;#u;#o;#l;#n;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),he(this.#e,this.options)?this.#c():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return K(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return K(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#y(),this.#e.removeObserver(this)}setOptions(e){const s=this.options,a=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof N(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#C(),this.#e.setOptions(this.options),s._defaulted&&!z(this.options,s)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&ue(this.#e,a,this.options,s)&&this.#c(),this.updateResult(),r&&(this.#e!==a||N(this.options.enabled,this.#e)!==N(s.enabled,this.#e)||L(this.options.staleTime,this.#e)!==L(s.staleTime,this.#e))&&this.#m();const n=this.#g();r&&(this.#e!==a||N(this.options.enabled,this.#e)!==N(s.enabled,this.#e)||n!==this.#n)&&this.#j(n)}getOptimisticResult(e){const s=this.#s.getQueryCache().build(this.#s,e),a=this.createResult(s,e);return qt(this,a)&&(this.#t=a,this.#d=this.options,this.#i=this.#e.state),a}getCurrentResult(){return this.#t}trackResult(e,s){return new Proxy(e,{get:(a,r)=>(this.trackProp(r),s?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(a,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=this.#s.defaultQueryOptions(e),a=this.#s.getQueryCache().build(this.#s,s);return a.fetch().then(()=>this.createResult(a,s))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#C();let s=this.#e.fetch(this.options,e);return e?.throwOnError||(s=s.catch(V)),s}#m(){this.#v();const e=L(this.options.staleTime,this.#e);if(q||this.#t.isStale||!ae(e))return;const a=ze(this.#t.dataUpdatedAt,e)+1;this.#o=F.setTimeout(()=>{this.#t.isStale||this.updateResult()},a)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#j(e){this.#y(),this.#n=e,!(q||N(this.options.enabled,this.#e)===!1||!ae(this.#n)||this.#n===0)&&(this.#l=F.setInterval(()=>{(this.options.refetchIntervalInBackground||Ve.isFocused())&&this.#c()},this.#n))}#b(){this.#m(),this.#j(this.#g())}#v(){this.#o&&(F.clearTimeout(this.#o),this.#o=void 0)}#y(){this.#l&&(F.clearInterval(this.#l),this.#l=void 0)}createResult(e,s){const a=this.#e,r=this.options,n=this.#t,l=this.#i,o=this.#d,d=e!==a?e.state:this.#f,{state:p}=e;let i={...p},m=!1,x;if(s._optimisticResults){const v=this.hasListeners(),$=!v&&he(e,s),O=v&&ue(e,a,s,r);($||O)&&(i={...i,...qe(p.data,e.options)}),s._optimisticResults==="isRestoring"&&(i.fetchStatus="idle")}let{error:k,errorUpdatedAt:M,status:g}=i;x=i.data;let f=!1;if(s.placeholderData!==void 0&&x===void 0&&g==="pending"){let v;n?.isPlaceholderData&&s.placeholderData===o?.placeholderData?(v=n.data,f=!0):v=typeof s.placeholderData=="function"?s.placeholderData(this.#u?.state.data,this.#u):s.placeholderData,v!==void 0&&(g="success",x=re(n?.data,v,s),m=!0)}if(s.select&&x!==void 0&&!f)if(n&&x===l?.data&&s.select===this.#x)x=this.#h;else try{this.#x=s.select,x=s.select(x),x=re(n?.data,x,s),this.#h=x,this.#r=null}catch(v){this.#r=v}this.#r&&(k=this.#r,x=this.#h,M=Date.now(),g="error");const y=i.fetchStatus==="fetching",j=g==="pending",c=g==="error",C=j&&y,R=x!==void 0,b={status:g,fetchStatus:i.fetchStatus,isPending:j,isSuccess:g==="success",isError:c,isInitialLoading:C,isLoading:C,data:x,dataUpdatedAt:i.dataUpdatedAt,error:k,errorUpdatedAt:M,failureCount:i.fetchFailureCount,failureReason:i.fetchFailureReason,errorUpdateCount:i.errorUpdateCount,isFetched:i.dataUpdateCount>0||i.errorUpdateCount>0,isFetchedAfterMount:i.dataUpdateCount>d.dataUpdateCount||i.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!j,isLoadingError:c&&!R,isPaused:i.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:c&&R,isStale:J(e,s),refetch:this.refetch,promise:this.#a,isEnabled:N(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const v=Q=>{b.status==="error"?Q.reject(b.error):b.data!==void 0&&Q.resolve(b.data)},$=()=>{const Q=this.#a=b.promise=se();v(Q)},O=this.#a;switch(O.status){case"pending":e.queryHash===a.queryHash&&v(O);break;case"fulfilled":(b.status==="error"||b.data!==O.value)&&$();break;case"rejected":(b.status!=="error"||b.error!==O.reason)&&$();break}}return b}updateResult(){const e=this.#t,s=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#d=this.options,this.#i.data!==void 0&&(this.#u=this.#e),z(s,e))return;this.#t=s;const a=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,n=typeof r=="function"?r():r;if(n==="all"||!n&&!this.#p.size)return!0;const l=new Set(n??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#t).some(o=>{const u=o;return this.#t[u]!==e[u]&&l.has(u)})};this.#S({listeners:a()})}#C(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const s=this.#e;this.#e=e,this.#f=e.state,this.hasListeners()&&(s?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){je.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Vt(e,s){return N(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function he(e,s){return Vt(e,s)||e.state.data!==void 0&&K(e,s,s.refetchOnMount)}function K(e,s,a){if(N(s.enabled,e)!==!1&&L(s.staleTime,e)!=="static"){const r=typeof a=="function"?a(e):a;return r==="always"||r!==!1&&J(e,s)}return!1}function ue(e,s,a,r){return(e!==s||N(r.enabled,e)===!1)&&(!a.suspense||e.state.status!=="error")&&J(e,a)}function J(e,s){return N(s.enabled,e)!==!1&&e.isStaleByTime(L(s.staleTime,e))}function qt(e,s){return!z(e.getCurrentResult(),s)}var _e=h.createContext(!1),Gt=()=>h.useContext(_e);_e.Provider;function Kt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Wt=h.createContext(Kt()),Zt=()=>h.useContext(Wt),Xt=(e,s)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(s.isReset()||(e.retryOnMount=!1))},Jt=e=>{h.useEffect(()=>{e.clearReset()},[e])},Yt=({result:e,errorResetBoundary:s,throwOnError:a,query:r,suspense:n})=>e.isError&&!s.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||Ge(a,[e.error,r])),es=e=>{if(e.suspense){const a=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>a(r(...n)):a(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ts=(e,s)=>e.isLoading&&e.isFetching&&!s,ss=(e,s)=>e?.suspense&&s.isPending,pe=(e,s,a)=>s.fetchOptimistic(e).catch(()=>{a.clearReset()});function as(e,s,a){const r=Gt(),n=Zt(),l=Ke(),o=l.defaultQueryOptions(e);l.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",es(o),Xt(o,n),Jt(n);const u=!l.getQueryCache().get(o.queryHash),[d]=h.useState(()=>new s(l,o)),p=d.getOptimisticResult(o),i=!r&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(m=>{const x=i?d.subscribe(je.batchCalls(m)):V;return d.updateResult(),x},[d,i]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),h.useEffect(()=>{d.setOptions(o)},[o,d]),ss(o,p))throw pe(o,d,n);if(Yt({result:p,errorResetBoundary:n,throwOnError:o.throwOnError,query:l.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw p.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(o,p),o.experimental_prefetchInRender&&!q&&ts(p,r)&&(u?pe(o,d,n):l.getQueryCache().get(o.queryHash)?.promise)?.catch(V).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?p:d.trackResult(p)}function Le(e,s){return as(e,zt)}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ns=D("circle-x",rs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],os=D("database",is);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],cs=D("ellipsis-vertical",ls);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Ae=D("folder-plus",ds);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],fe=D("folder",hs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],ps=D("laptop",us);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],$e=D("library",fs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 8h7",key:"kbo1nt"}],["path",{d:"M8 12h6",key:"ikassy"}],["path",{d:"M11 16h5",key:"oq65wt"}]],ms=D("square-chart-gantt",xs),gs={navGroups:[{items:[{title:"Neuer Chat",url:"/chat",icon:Se},{title:"Bibliothek",icon:$e,items:[{title:"Datasets",url:"/library/datasets",icon:os},{title:"Dokumente",url:"/library/documents",icon:Mt}]},{title:"Projekte",url:"/projects",icon:Ae}]}]};function js(){const e=be(),{setTheme:s}=We(),{open:a,setOpen:r}=vs(),n=W.useCallback(l=>{r(!1),l()},[r]);return t.jsxs(Ct,{modal:!0,open:a,onOpenChange:r,children:[t.jsx(St,{placeholder:"Type a command or search..."}),t.jsx(Nt,{children:t.jsxs(Rt,{type:"hover",className:"h-72 pe-1",children:[t.jsx(wt,{children:"No results found."}),gs.navGroups.map((l,o)=>t.jsx(oe,{heading:l.title||"Navigation",children:l.items.map((u,d)=>u.url?t.jsxs(_,{value:u.title,onSelect:()=>{n(()=>e({to:u.url}))},children:[t.jsx("div",{className:"flex size-4 items-center justify-center",children:t.jsx(ce,{className:"text-muted-foreground/80 size-2"})}),u.title]},`${u.url}-${d}`):u.items?.map((p,i)=>t.jsxs(_,{value:`${u.title}-${p.url}`,onSelect:()=>{n(()=>e({to:p.url}))},children:[t.jsx("div",{className:"flex size-4 items-center justify-center",children:t.jsx(ce,{className:"text-muted-foreground/80 size-2"})}),u.title," ",t.jsx(U,{})," ",p.title]},`${u.title}-${p.url}-${i}`)))},o)),t.jsx(kt,{}),t.jsxs(oe,{heading:"Theme",children:[t.jsxs(_,{onSelect:()=>n(()=>s("light")),children:[t.jsx(Ye,{})," ",t.jsx("span",{children:"Light"})]}),t.jsxs(_,{onSelect:()=>n(()=>s("dark")),children:[t.jsx(et,{className:"scale-90"}),t.jsx("span",{children:"Dark"})]}),t.jsxs(_,{onSelect:()=>n(()=>s("system")),children:[t.jsx(ps,{}),t.jsx("span",{children:"System"})]})]})]})})]})}const Qe=h.createContext(null);function bs({children:e}){const[s,a]=h.useState(!1);return h.useEffect(()=>{const r=n=>{n.key==="k"&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),a(l=>!l))};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[]),t.jsxs(Qe,{value:{open:s,setOpen:a},children:[e,t.jsx(js,{})]})}const vs=()=>{const e=h.useContext(Qe);if(!e)throw new Error("useSearch has to be used within SearchProvider");return e};function ys(){const{datasets:e}=Ne(),s=e.map(a=>({title:a.name,url:`/library/datasets/${a.id}`,icon:fe,badge:a.files.length.toString()}));return{teams:[{name:"Agent AI",logo:"/images/logo.png",plan:"AI Chat Assistant"}],navGroups:[{items:[{title:"Neuer Chat",url:"/chat",icon:Se},{title:"Bibliothek",icon:$e,items:[{title:"Datasets",icon:fe,items:[{title:"Verwalten",url:"/library/datasets",icon:ms},...s]}]},{title:"Projekte",url:"/projects",icon:Ae}]}]}}var B="Collapsible",[Cs]=Ot(B),[Ss,Y]=Cs(B),Fe=h.forwardRef((e,s)=>{const{__scopeCollapsible:a,open:r,defaultOpen:n,disabled:l,onOpenChange:o,...u}=e,[d,p]=Dt({prop:r,defaultProp:n??!1,onChange:o,caller:B});return t.jsx(Ss,{scope:a,disabled:l,contentId:Et(),open:d,onOpenToggle:h.useCallback(()=>p(i=>!i),[p]),children:t.jsx(X.div,{"data-state":te(d),"data-disabled":l?"":void 0,...u,ref:s})})});Fe.displayName=B;var Ie="CollapsibleTrigger",Ue=h.forwardRef((e,s)=>{const{__scopeCollapsible:a,...r}=e,n=Y(Ie,a);return t.jsx(X.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":te(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...r,ref:s,onClick:Tt(e.onClick,n.onOpenToggle)})});Ue.displayName=Ie;var ee="CollapsibleContent",He=h.forwardRef((e,s)=>{const{forceMount:a,...r}=e,n=Y(ee,e.__scopeCollapsible);return t.jsx(_t,{present:a||n.open,children:({present:l})=>t.jsx(Ns,{...r,ref:s,present:l})})});He.displayName=ee;var Ns=h.forwardRef((e,s)=>{const{__scopeCollapsible:a,present:r,children:n,...l}=e,o=Y(ee,a),[u,d]=h.useState(r),p=h.useRef(null),i=Ze(s,p),m=h.useRef(0),x=m.current,k=h.useRef(0),M=k.current,g=o.open||u,f=h.useRef(g),y=h.useRef(void 0);return h.useEffect(()=>{const j=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(j)},[]),Pt(()=>{const j=p.current;if(j){y.current=y.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const c=j.getBoundingClientRect();m.current=c.height,k.current=c.width,f.current||(j.style.transitionDuration=y.current.transitionDuration,j.style.animationName=y.current.animationName),d(r)}},[o.open,r]),t.jsx(X.div,{"data-state":te(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...l,ref:i,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":M?`${M}px`:void 0,...e.style},children:g&&n})});function te(e){return e?"open":"closed"}var ws=Fe;function xe({...e}){return t.jsx(ws,{"data-slot":"collapsible",...e})}function me({...e}){return t.jsx(Ue,{"data-slot":"collapsible-trigger",...e})}function ge({...e}){return t.jsx(He,{"data-slot":"collapsible-content",...e})}function ks({items:e}){const{state:s,isMobile:a}=T(),r=ve({select:n=>n.href});return t.jsx(ye,{className:"mt-0",children:t.jsx(Ce,{children:e.map(n=>{const l=`${n.title}-${n.url}`;return n.items?s==="collapsed"&&!a?t.jsx(Ds,{item:n,href:r},l):t.jsx(Rs,{item:n,href:r},l):t.jsx(Ms,{item:n,href:r},l)})})})}function E({children:e}){return t.jsx(Lt,{className:"rounded-full px-1 py-0 text-[10px] leading-none",children:e})}function Ms({item:e,href:s}){const{setOpenMobile:a}=T();return t.jsx(H,{children:t.jsx(Z,{asChild:!0,isActive:A(s,e),tooltip:e.title,children:t.jsxs(I,{to:e.url,onClick:()=>a(!1),children:[e.icon&&t.jsx(e.icon,{}),t.jsx("span",{children:e.title}),e.badge&&t.jsx(E,{children:e.badge})]})})})}function Rs({item:e,href:s}){const{setOpenMobile:a}=T();return t.jsx(xe,{asChild:!0,defaultOpen:A(s,e,!0),className:"group/collapsible",children:t.jsxs(H,{children:[t.jsx(me,{asChild:!0,children:t.jsxs(Z,{tooltip:e.title,children:[e.icon&&t.jsx(e.icon,{}),t.jsx("span",{children:e.title}),e.badge&&t.jsx(E,{children:e.badge}),t.jsx(U,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),t.jsx(ge,{className:"CollapsibleContent",children:t.jsx(tt,{children:e.items.map(r=>"items"in r&&r.items?t.jsx(xe,{className:"group/sub-collapsible",children:t.jsxs(ne,{children:[t.jsx(me,{asChild:!0,children:t.jsxs(ie,{children:[r.icon&&t.jsx(r.icon,{}),t.jsx("span",{children:r.title}),r.badge&&t.jsx(E,{children:r.badge}),t.jsx(U,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/sub-collapsible:rotate-90"})]})}),t.jsx(ge,{children:t.jsx("div",{className:"ml-4 space-y-1",children:"items"in r&&r.items?r.items.map(n=>t.jsxs(I,{to:n.url,onClick:()=>a(!1),className:"flex items-center gap-2 px-2 py-1 text-sm text-muted-foreground hover:text-foreground rounded hover:bg-muted/50 transition-colors",children:[n.icon&&t.jsx(n.icon,{className:"h-4 w-4"}),t.jsx("span",{className:"truncate",children:n.title}),n.badge&&t.jsx(E,{children:n.badge})]},n.title)):null})})]})},r.title):t.jsx(ne,{children:t.jsx(ie,{asChild:!0,isActive:A(s,r),children:t.jsxs(I,{to:r.url,onClick:()=>a(!1),children:[r.icon&&t.jsx(r.icon,{}),t.jsx("span",{children:r.title}),r.badge&&t.jsx(E,{children:r.badge})]})})},r.title))})})]})})}function Ds({item:e,href:s}){return t.jsx(H,{children:t.jsxs(we,{children:[t.jsx(ke,{asChild:!0,children:t.jsxs(Z,{tooltip:e.title,isActive:A(s,e),children:[e.icon&&t.jsx(e.icon,{}),t.jsx("span",{children:e.title}),e.badge&&t.jsx(E,{children:e.badge}),t.jsx(U,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),t.jsxs(Me,{side:"right",align:"start",sideOffset:4,children:[t.jsxs(At,{children:[e.title," ",e.badge?`(${e.badge})`:""]}),t.jsx($t,{}),e.items.map(a=>t.jsx(Re,{asChild:!0,children:t.jsxs(I,{to:a.url,className:`${A(s,a)?"bg-secondary":""}`,children:[a.icon&&t.jsx(a.icon,{}),t.jsx("span",{className:"max-w-52 text-wrap",children:a.title}),a.badge&&t.jsx("span",{className:"ms-auto text-xs",children:a.badge})]})},`${a.title}-${a.url}`))]})]})})}function A(e,s,a=!1){return e===s.url||e.split("?")[0]===s.url||!!s?.items?.filter(r=>r.url===e).length||a&&e.split("/")[1]!==""&&e.split("/")[1]===s?.url?.split("/")[1]}function Os({teams:e}){const[s]=h.useState(e[0]),{state:a,isMobile:r}=T();return t.jsx(Ce,{children:t.jsx(H,{children:t.jsxs("div",{className:`flex items-center px-2 py-2 ${a==="collapsed"&&!r?"justify-center":"gap-3"}`,children:[t.jsx("div",{className:"bg-secondary dark:bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:t.jsx("img",{src:s.logo,alt:s.name,className:"size-4"})}),(a!=="collapsed"||r)&&t.jsx("span",{className:"font-semibold text-sm",children:s.name})]})})})}function Es({className:e}){const s=be(),a=w(c=>c.chats),r=w(c=>c.handleDelete),n=w(c=>c.setCurrentChatId),l=w(c=>c.currentChatId),{setOpenMobile:o}=T(),[u,d]=h.useState(!1),[p,i]=h.useState(null),[m,x]=h.useState(""),k=c=>{i(c),d(!0)},M=()=>{p&&(r(p),d(!1),i(null),s({to:"/chat"}))},g=()=>{d(!1),i(null)},f=h.useMemo(()=>{const c=a?Object.entries(a).map(([R,P])=>({id:R,...P})):[];if(!m.trim())return c;const C=m.toLowerCase().trim();return c.filter(R=>R.messages.some(P=>P.content.toLowerCase().includes(C)))},[a,m]),y=h.useMemo(()=>f.sort((c,C)=>new Date(C.createdAt).getTime()-new Date(c.createdAt).getTime()),[f]),j=(c,C)=>{if(!C.trim())return c;const R=new RegExp(`(${C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return c.split(R).map((b,v)=>R.test(b)?t.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded",children:b},v):b)};return t.jsxs("div",{className:G("flex flex-col h-full",e),children:[t.jsx("div",{className:"flex-shrink-0 px-2 pb-2",children:t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(Qt,{placeholder:"Chats durchsuchen...",value:m,onChange:c=>x(c.target.value),className:"pl-8 pr-8 h-8 text-sm"}),m&&t.jsx(S,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:()=>x(""),children:t.jsx(ns,{className:"h-3 w-3"})})]})}),m&&t.jsx("div",{className:"flex-shrink-0 px-2 pb-2 text-xs text-muted-foreground",children:y.length===0?t.jsxs("span",{children:['Keine Treffer für "',m,'"']}):t.jsxs("span",{children:[y.length,' Treffer für "',m,'"']})}),t.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:y.length===0&&!m?t.jsxs("div",{className:"px-2 py-4 text-center text-muted-foreground",children:[t.jsx("p",{className:"text-sm",children:"Keine Chats vorhanden"}),t.jsx("p",{className:"text-xs",children:"Starten Sie eine neue Unterhaltung"})]}):t.jsx("div",{className:"space-y-1 px-2",children:y.map(c=>{const C=c.messages.length>0?c.messages[0].content:"Leerer Chat";return t.jsxs("div",{className:G("group flex items-center gap-2 rounded-lg px-2 py-1 text-sm transition-colors hover:bg-accent",l===c.id&&"bg-accent"),children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("button",{onClick:()=>{n(c.id),s({to:"/chat/$chatId",params:{chatId:c.id}}),o(!1)},className:"flex-1 text-left min-w-0 w-full",children:t.jsxs("div",{className:"truncate font-normal text-xs",children:[j(C.slice(0,50),m),C.length>50&&"..."]})})}),t.jsxs(we,{children:[t.jsx(ke,{asChild:!0,children:t.jsx(S,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(cs,{className:"h-3 w-3"})})}),t.jsx(Me,{align:"end",children:t.jsxs(Re,{onClick:()=>k(c.id),className:"text-destructive",children:[t.jsx(le,{className:"mr-2 h-4 w-4"}),"Löschen"]})})]})]},c.id)})})}),t.jsx(st,{open:u,onOpenChange:d,children:t.jsxs(at,{children:[t.jsxs(rt,{children:[t.jsx(nt,{children:"Chat löschen"}),t.jsx(it,{children:"Möchten Sie diesen Chat wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden."})]}),t.jsxs(ot,{children:[t.jsx(lt,{onClick:g,children:"Abbrechen"}),t.jsxs(ct,{onClick:M,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[t.jsx(le,{className:"mr-2 h-4 w-4"}),"Löschen"]})]})]})})]})}function Ts(){const{collapsible:e,variant:s}=dt(),{state:a,isMobile:r}=T(),n=ys();return t.jsxs(ht,{collapsible:e,variant:s,children:[t.jsxs(ut,{className:"flex flex-col",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Os,{teams:n.teams})}),t.jsx("div",{className:"flex-shrink-0",children:n.navGroups.map((o,u)=>t.jsx(ks,{...o},u))}),(a!=="collapsed"||r)&&!0&&t.jsxs(ye,{className:"flex-1 flex flex-col min-h-0",children:[t.jsx(pt,{className:"flex-shrink-0",children:"Chat-Verlauf"}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx(Es,{})})]})]}),t.jsx(ft,{})]})}function Ps(){return t.jsx("a",{className:"bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:ring-ring fixed start-44 z-999 -translate-y-52 px-4 py-2 text-sm font-medium whitespace-nowrap opacity-95 shadow-sm transition focus:translate-y-3 focus:transform focus-visible:ring-1",href:"#content",children:"Skip to Main"})}function _s(){return Le({queryKey:["ollama-models"],queryFn:async()=>{const e=await fetch("/api/tags");if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()},staleTime:300*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)})}function Ls(){return Le({queryKey:["deepseek-models"],queryFn:async()=>{const e=await fetch("/api/deepseek/models");if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()},staleTime:600*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)})}function As(){const e=_s(),s=Ls();return{ollamaModels:e.data?.models||[],deepseekModels:s.data?.data||[],isLoading:e.isLoading||s.isLoading,isError:e.isError||s.isError,error:e.error||s.error,refetch:()=>{e.refetch(),s.refetch()}}}function $s({isLoading:e=!1}){const[s,a]=W.useState(!1),r=w(f=>f.selectedModel),n=w(f=>f.selectedProvider),l=w(f=>f.setSelectedModel),o=w(f=>f.setSelectedProvider),{ollamaModels:u,deepseekModels:d,isLoading:p,isError:i}=As(),m=f=>{l(f),a(!1)},x=f=>{o(f),l("")},k=u.map(f=>f.name),M=d.map(f=>f.id),g=n==="ollama"?k:M;return t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(It,{value:n,onValueChange:x,children:[t.jsx(Ut,{className:"w-[120px]",children:t.jsx(Ht,{})}),t.jsxs(Bt,{children:[t.jsx(de,{value:"ollama",children:"Ollama"}),t.jsx(de,{value:"deepseek",children:"DeepSeek"})]})]}),t.jsxs(De,{open:s,onOpenChange:a,children:[t.jsx(Oe,{asChild:!0,children:t.jsxs(S,{disabled:e,variant:"outline",role:"combobox","aria-expanded":s,className:"w-[220px] justify-between",children:[r||"Modell auswählen",t.jsx(Te,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),t.jsx(Ee,{className:"w-[220px] p-1",children:p?t.jsxs(S,{variant:"ghost",disabled:!0,className:"w-full",children:[t.jsx(Pe,{className:"mr-2 h-4 w-4 animate-spin"}),"Lade Modelle..."]}):i?t.jsx(S,{variant:"ghost",disabled:!0,className:"w-full",children:"Fehler beim Laden"}):g.length>0?g.map(f=>t.jsx(S,{variant:"ghost",className:"w-full justify-start",onClick:()=>{m(f)},children:f},f)):t.jsx(S,{variant:"ghost",disabled:!0,className:"w-full",children:"Keine Modelle verfügbar"})})]})]})}function Qs({isLoading:e=!1}){const[s,a]=W.useState(!1),r=w(i=>i.selectedDataset),n=w(i=>i.setSelectedDataset),{datasets:l,isLoading:o,error:u}=Ne(),d=l.filter(i=>i.files&&i.files.length>0),p=i=>{n(i),a(!1)};return t.jsx("div",{className:"flex gap-2",children:t.jsxs(De,{open:s,onOpenChange:a,children:[t.jsx(Oe,{asChild:!0,children:t.jsxs(S,{disabled:e,variant:"outline",role:"combobox","aria-expanded":s,className:"w-[220px] justify-between",children:[r||"Dataset auswählen",t.jsx(Te,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),t.jsx(Ee,{className:"w-[220px] p-1",children:o?t.jsxs(S,{variant:"ghost",disabled:!0,className:"w-full",children:[t.jsx(Pe,{className:"mr-2 h-4 w-4 animate-spin"}),"Lade Datasets..."]}):u?t.jsx(S,{variant:"ghost",disabled:!0,className:"w-full",children:"Fehler beim Laden"}):d.length>0?d.map(i=>t.jsx(S,{variant:"ghost",className:"w-full justify-start",onClick:()=>{p(i.name)},children:t.jsxs("div",{className:"flex flex-col items-start",children:[t.jsx("span",{className:"font-medium",children:i.name}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.files.length," Datei",i.files.length!==1?"en":""]})]})},i.id)):t.jsx(S,{variant:"ghost",disabled:!0,className:"w-full",children:"Keine Datasets verfügbar"})})]})})}function oa({children:e}){const s=Xe("sidebar_state")!=="false",r=ve().pathname.startsWith("/chat"),n=w(l=>l.chatMode);return t.jsx(bs,{children:t.jsx(xt,{children:t.jsxs(mt,{defaultOpen:s,children:[t.jsx(Ps,{}),t.jsx(Ts,{}),t.jsxs(gt,{className:G("@container/content","has-[[data-layout=fixed]]:h-svh","peer-data-[variant=inset]:has-[[data-layout=fixed]]:h-[calc(100svh-(var(--spacing)*4))]"),children:[t.jsxs(jt,{fixed:!0,children:[r&&t.jsx("div",{className:"mx-auto flex items-center",children:n==="general"?t.jsx($s,{}):t.jsx(Qs,{})}),t.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[t.jsx(bt,{}),t.jsx(vt,{}),t.jsx(yt,{})]})]}),t.jsx("div",{className:"flex flex-1 flex-col",children:e??t.jsx(Je,{})})]})]})})})}export{oa as A};
