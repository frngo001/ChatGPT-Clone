import{a as Q,e as oe,R as ie,j as e,r as o,f as ce,L as P,c as T,B as H,g as de,O as he}from"./index-DIMaQiqK.js";import{u as U,a as ue,L as pe}from"./layout-provider-XSE7bRoD.js";import{C as xe,a as me,b as fe,c as je,d as F,e as k,f as ge,S as be}from"./command-D-MwPY4u.js";import{c as b}from"./createLucideIcon-BLFTGKfC.js";import{S as Ce}from"./scroll-area-D5iHMLxs.js";import{A as K}from"./arrow-right-C9sPCbsY.js";import{C as E}from"./index-BOTvQ8Lr.js";import{a as ve,M as ye,u as C,b as W,c as X,d as L,e as z,D as Z,f as J,g as Y,h as Ne,i as ke,j as ee,k as Se,l as we,m as Me,A as Ae,n as De,o as $e,p as Le,q as Oe,r as Re,s as Te,t as _e,v as Pe,w as Ee,x as ze,y as Be,z as Ge,B as qe}from"./alert-dialog-B-EaQZu9.js";import{u as Ie,c as He,a as Fe,b as Ke}from"./index-CC1GEaG-.js";import{P as B}from"./index-BIXP3q5l.js";import{P as Ve}from"./index-Dc0zGrEp.js";import{u as Qe}from"./index-CxwEreXY.js";import{B as Ue,T as V}from"./badge-8qpgVGq-.js";import{I as We}from"./input-DwMM6V_f.js";import{u as D}from"./ollama-chat-store-C_KFQa_i.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ze=b("circle-x",Xe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ye=b("ellipsis-vertical",Je);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ss=b("folder-plus",es);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],as=b("laptop",ts);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],rs=b("library",ns);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],os=b("square-pen",ls),_={teams:[{name:"Agent AI",logo:"/images/logo.png",plan:"AI Chat Assistant"}],navGroups:[{items:[{title:"Neuer Chat",url:"/ollama-chat",icon:os},{title:"Bibliothek",url:"/library",icon:rs},{title:"Projekte",url:"/projects",icon:ss}]}]};function is(){const s=Q(),{setTheme:t}=oe(),{open:a,setOpen:n}=ds(),r=ie.useCallback(i=>{n(!1),i()},[n]);return e.jsxs(xe,{modal:!0,open:a,onOpenChange:n,children:[e.jsx(me,{placeholder:"Type a command or search..."}),e.jsx(fe,{children:e.jsxs(Ce,{type:"hover",className:"h-72 pe-1",children:[e.jsx(je,{children:"No results found."}),_.navGroups.map((i,d)=>e.jsx(F,{heading:i.title||"Navigation",children:i.items.map((c,x)=>c.url?e.jsxs(k,{value:c.title,onSelect:()=>{r(()=>s({to:c.url}))},children:[e.jsx("div",{className:"flex size-4 items-center justify-center",children:e.jsx(K,{className:"text-muted-foreground/80 size-2"})}),c.title]},`${c.url}-${x}`):c.items?.map((h,m)=>e.jsxs(k,{value:`${c.title}-${h.url}`,onSelect:()=>{r(()=>s({to:h.url}))},children:[e.jsx("div",{className:"flex size-4 items-center justify-center",children:e.jsx(K,{className:"text-muted-foreground/80 size-2"})}),c.title," ",e.jsx(E,{})," ",h.title]},`${c.title}-${h.url}-${m}`)))},d)),e.jsx(ge,{}),e.jsxs(F,{heading:"Theme",children:[e.jsxs(k,{onSelect:()=>r(()=>t("light")),children:[e.jsx(ve,{})," ",e.jsx("span",{children:"Light"})]}),e.jsxs(k,{onSelect:()=>r(()=>t("dark")),children:[e.jsx(ye,{className:"scale-90"}),e.jsx("span",{children:"Dark"})]}),e.jsxs(k,{onSelect:()=>r(()=>t("system")),children:[e.jsx(as,{}),e.jsx("span",{children:"System"})]})]})]})})]})}const se=o.createContext(null);function cs({children:s}){const[t,a]=o.useState(!1);return o.useEffect(()=>{const n=r=>{r.key==="k"&&(r.metaKey||r.ctrlKey)&&(r.preventDefault(),a(i=>!i))};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[]),e.jsxs(se,{value:{open:t,setOpen:a},children:[s,e.jsx(is,{})]})}const ds=()=>{const s=o.useContext(se);if(!s)throw new Error("useSearch has to be used within SearchProvider");return s};var O="Collapsible",[hs]=He(O),[us,G]=hs(O),te=o.forwardRef((s,t)=>{const{__scopeCollapsible:a,open:n,defaultOpen:r,disabled:i,onOpenChange:d,...c}=s,[x,h]=Ie({prop:n,defaultProp:r??!1,onChange:d,caller:O});return e.jsx(us,{scope:a,disabled:i,contentId:Qe(),open:x,onOpenToggle:o.useCallback(()=>h(m=>!m),[h]),children:e.jsx(B.div,{"data-state":I(x),"data-disabled":i?"":void 0,...c,ref:t})})});te.displayName=O;var ae="CollapsibleTrigger",ne=o.forwardRef((s,t)=>{const{__scopeCollapsible:a,...n}=s,r=G(ae,a);return e.jsx(B.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":I(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...n,ref:t,onClick:Fe(s.onClick,r.onOpenToggle)})});ne.displayName=ae;var q="CollapsibleContent",re=o.forwardRef((s,t)=>{const{forceMount:a,...n}=s,r=G(q,s.__scopeCollapsible);return e.jsx(Ve,{present:a||r.open,children:({present:i})=>e.jsx(ps,{...n,ref:t,present:i})})});re.displayName=q;var ps=o.forwardRef((s,t)=>{const{__scopeCollapsible:a,present:n,children:r,...i}=s,d=G(q,a),[c,x]=o.useState(n),h=o.useRef(null),m=ce(t,h),u=o.useRef(0),v=u.current,w=o.useRef(0),M=w.current,y=d.open||c,N=o.useRef(y),f=o.useRef(void 0);return o.useEffect(()=>{const p=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(p)},[]),Ke(()=>{const p=h.current;if(p){f.current=f.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const l=p.getBoundingClientRect();u.current=l.height,w.current=l.width,N.current||(p.style.transitionDuration=f.current.transitionDuration,p.style.animationName=f.current.animationName),x(n)}},[d.open,n]),e.jsx(B.div,{"data-state":I(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!y,...i,ref:m,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":M?`${M}px`:void 0,...s.style},children:y&&r})});function I(s){return s?"open":"closed"}var xs=te;function ms({...s}){return e.jsx(xs,{"data-slot":"collapsible",...s})}function fs({...s}){return e.jsx(ne,{"data-slot":"collapsible-trigger",...s})}function js({...s}){return e.jsx(re,{"data-slot":"collapsible-content",...s})}function gs({items:s}){const{state:t,isMobile:a}=C(),n=U({select:r=>r.href});return e.jsx(W,{className:"mt-0",children:e.jsx(X,{children:s.map(r=>{const i=`${r.title}-${r.url}`;return r.items?t==="collapsed"&&!a?e.jsx(vs,{item:r,href:n},i):e.jsx(Cs,{item:r,href:n},i):e.jsx(bs,{item:r,href:n},i)})})})}function $({children:s}){return e.jsx(Ue,{className:"rounded-full px-1 py-0 text-xs",children:s})}function bs({item:s,href:t}){const{setOpenMobile:a}=C();return e.jsx(L,{children:e.jsx(z,{asChild:!0,isActive:S(t,s),tooltip:s.title,children:e.jsxs(P,{to:s.url,onClick:()=>a(!1),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx($,{children:s.badge})]})})})}function Cs({item:s,href:t}){const{setOpenMobile:a}=C();return e.jsx(ms,{asChild:!0,defaultOpen:S(t,s,!0),className:"group/collapsible",children:e.jsxs(L,{children:[e.jsx(fs,{asChild:!0,children:e.jsxs(z,{tooltip:s.title,children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx($,{children:s.badge}),e.jsx(E,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsx(js,{className:"CollapsibleContent",children:e.jsx(Se,{children:s.items.map(n=>e.jsx(we,{children:e.jsx(Me,{asChild:!0,isActive:S(t,n),children:e.jsxs(P,{to:n.url,onClick:()=>a(!1),children:[n.icon&&e.jsx(n.icon,{}),e.jsx("span",{children:n.title}),n.badge&&e.jsx($,{children:n.badge})]})})},n.title))})})]})})}function vs({item:s,href:t}){return e.jsx(L,{children:e.jsxs(Z,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(z,{tooltip:s.title,isActive:S(t,s),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx($,{children:s.badge}),e.jsx(E,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsxs(Y,{side:"right",align:"start",sideOffset:4,children:[e.jsxs(Ne,{children:[s.title," ",s.badge?`(${s.badge})`:""]}),e.jsx(ke,{}),s.items.map(a=>e.jsx(ee,{asChild:!0,children:e.jsxs(P,{to:a.url,className:`${S(t,a)?"bg-secondary":""}`,children:[a.icon&&e.jsx(a.icon,{}),e.jsx("span",{className:"max-w-52 text-wrap",children:a.title}),a.badge&&e.jsx("span",{className:"ms-auto text-xs",children:a.badge})]})},`${a.title}-${a.url}`))]})]})})}function S(s,t,a=!1){return s===t.url||s.split("?")[0]===t.url||!!t?.items?.filter(n=>n.url===s).length||a&&s.split("/")[1]!==""&&s.split("/")[1]===t?.url?.split("/")[1]}function ys({teams:s}){const[t]=o.useState(s[0]),{state:a,isMobile:n}=C();return e.jsx(X,{children:e.jsx(L,{children:e.jsxs("div",{className:`flex items-center px-2 py-2 ${a==="collapsed"&&!n?"justify-center":"gap-3"}`,children:[e.jsx("div",{className:"bg-gray-200 dark:bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:e.jsx("img",{src:t.logo,alt:t.name,className:"size-4"})}),(a!=="collapsed"||n)&&e.jsx("span",{className:"font-semibold text-sm",children:t.name})]})})})}function Ns({className:s}){const t=Q(),a=D(l=>l.chats),n=D(l=>l.handleDelete),r=D(l=>l.setCurrentChatId),i=D(l=>l.currentChatId),{setOpenMobile:d}=C(),[c,x]=o.useState(!1),[h,m]=o.useState(null),[u,v]=o.useState(""),w=l=>{m(l),x(!0)},M=()=>{h&&(n(h),x(!1),m(null),t({to:"/ollama-chat"}))},y=()=>{x(!1),m(null)},N=o.useMemo(()=>{const l=a?Object.entries(a).map(([g,A])=>({id:g,...A})):[];if(!u.trim())return l;const j=u.toLowerCase().trim();return l.filter(g=>g.messages.some(A=>A.content.toLowerCase().includes(j)))},[a,u]),f=o.useMemo(()=>N.sort((l,j)=>new Date(j.createdAt).getTime()-new Date(l.createdAt).getTime()),[N]),p=(l,j)=>{if(!j.trim())return l;const g=new RegExp(`(${j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return l.split(g).map((R,le)=>g.test(R)?e.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded",children:R},le):R)};return e.jsxs("div",{className:T("flex flex-col h-full",s),children:[e.jsx("div",{className:"flex-shrink-0 px-2 pb-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(We,{placeholder:"Chats durchsuchen...",value:u,onChange:l=>v(l.target.value),className:"pl-8 pr-8 h-8 text-sm"}),u&&e.jsx(H,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:()=>v(""),children:e.jsx(Ze,{className:"h-3 w-3"})})]})}),u&&e.jsx("div",{className:"flex-shrink-0 px-2 pb-2 text-xs text-muted-foreground",children:f.length===0?e.jsxs("span",{children:['Keine Treffer für "',u,'"']}):e.jsxs("span",{children:[f.length,' Treffer für "',u,'"']})}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:f.length===0&&!u?e.jsxs("div",{className:"px-2 py-4 text-center text-muted-foreground",children:[e.jsx("p",{className:"text-sm",children:"Keine Chats vorhanden"}),e.jsx("p",{className:"text-xs",children:"Starten Sie eine neue Unterhaltung"})]}):e.jsx("div",{className:"space-y-1 px-2",children:f.map(l=>{const j=l.messages.length>0?l.messages[0].content:"Leerer Chat";return e.jsxs("div",{className:T("group flex items-center gap-2 rounded-lg p-2 text-sm transition-colors hover:bg-accent",i===l.id&&"bg-accent"),children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("button",{onClick:()=>{r(l.id),t({to:"/ollama-chat/$chatId",params:{chatId:l.id}}),d(!1)},className:"flex-1 text-left min-w-0 w-full",children:e.jsxs("div",{className:"truncate font-normal text-xs",children:[p(j.slice(0,50),u),j.length>50&&"..."]})})}),e.jsxs(Z,{children:[e.jsx(J,{asChild:!0,children:e.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ye,{className:"h-3 w-3"})})}),e.jsx(Y,{align:"end",children:e.jsxs(ee,{onClick:()=>w(l.id),className:"text-destructive",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Löschen"]})})]})]},l.id)})})}),e.jsx(Ae,{open:c,onOpenChange:x,children:e.jsxs(De,{children:[e.jsxs($e,{children:[e.jsx(Le,{children:"Chat löschen"}),e.jsx(Oe,{children:"Möchten Sie diesen Chat wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden."})]}),e.jsxs(Re,{children:[e.jsx(Te,{onClick:y,children:"Abbrechen"}),e.jsxs(_e,{onClick:M,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Löschen"]})]})]})})]})}function ks(){const{collapsible:s,variant:t}=ue(),{state:a,isMobile:n}=C(),i=U().pathname.startsWith("/ollama-chat");return e.jsxs(Pe,{collapsible:s,variant:t,children:[e.jsxs(Ee,{className:"flex flex-col",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ys,{teams:_.teams})}),e.jsx("div",{className:"flex-shrink-0",children:_.navGroups.map((d,c)=>e.jsx(gs,{...d},c))}),(a!=="collapsed"||n)&&i&&e.jsxs(W,{className:"flex-1 flex flex-col min-h-0",children:[e.jsx(ze,{className:"flex-shrink-0",children:"Chat-Verlauf"}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Ns,{})})]})]}),e.jsx(Be,{})]})}function Ss(){return e.jsx("a",{className:"bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:ring-ring fixed start-44 z-999 -translate-y-52 px-4 py-2 text-sm font-medium whitespace-nowrap opacity-95 shadow-sm transition focus:translate-y-3 focus:transform focus-visible:ring-1",href:"#content",children:"Skip to Main"})}function qs({children:s}){const t=de("sidebar_state")!=="false";return e.jsx(cs,{children:e.jsx(pe,{children:e.jsxs(Ge,{defaultOpen:t,children:[e.jsx(Ss,{}),e.jsx(ks,{}),e.jsx(qe,{className:T("@container/content","has-[[data-layout=fixed]]:h-svh","peer-data-[variant=inset]:has-[[data-layout=fixed]]:h-[calc(100svh-(var(--spacing)*4))]"),children:s??e.jsx(he,{})})]})})})}export{qs as A};
